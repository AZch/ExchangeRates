package com.wcreators.strategyindicators.services.indicators.rsi;

import generators.PointsGenerator;
import org.junit.jupiter.api.Test;

import java.util.Optional;

import static org.junit.jupiter.api.Assertions.assertTrue;

class RSITest {

//    private final RSI rsi = new RSI(3);

    @Test
    public void loadData() {

        double[] values = PointsGenerator.getValues();
        State prev = new State();

        for (int i = 0; i < values.length; i++) {
//            double expected = rsi.addPoint(values[i], () -> prev.v);
            prev.v = Optional.of(values[i]);
            double actual = rsis[i];
//            String indexedErrorMessage = String.format("Incorrect calculated value for %d, %f : %f", i, expected, actual);
//            assertTrue(Math.abs(expected - actual) < 0.000001, indexedErrorMessage);
        }
    }



    private static class State {
        Optional<Double> v = Optional.empty();
    }


    double[] rsis = new double[] {
            0,
            0,
            62.5,
            73.5294117647059,
            19.2307692307692,
            4.20875420875421,
            4.20875420875421,
            2.39923224568138,
            28.6816269284713,
            50.7744433688287,
            75.2795333009236,
            14.7405997144217,
            11.4053178168962,
            11.4053178168962,
            70.0791025098879,
            63.5991150642256,
            92.2529391698737,
            59.478819794006,
            59.478819794006,
            9.17711491246227,
            6.37957459646001,
            57.8163817960881,
            86.1269943019417,
            90.181891840578,
            59.6637580052199,
            21.0301095654338,
            21.0301095654338,
            74.0640913950007,
            79.5559527766071,
            88.0151533951115,
            96.1972438138364,
            35.8878034557461,
            25.7845333689249,
            11.5176129076827,
            57.998060650633,
            61.659936458436,
            81.2628152084852,
            37.0553910072388,
            80.1813075123925,
            92.2765337204674,
            94.9651692159391,
            98.1288946629143,
            99.0805192562524,
            99.3596635945593,
            99.5441749533219,
            99.7882434581438,
            64.9898554355107,
            25.2952589333492,
            61.6919280899839,
            77.4128257053696,
            66.4971619992053,
            91.2298936066398,
            44.8630612335122,
            84.7427302295559,
            44.9798870166127,
            29.7510709023951,
            72.7716360167013,
            81.0576043694562,
            65.1876101282762,
            88.2305730799292,
            37.9676273756515,
            28.2959074147029,
            83.0352644147859,
            59.2350485822015,
            32.8616627573542,
            61.9236631970815,
            79.5917753128074,
            90.2011159161836,
            47.6956312642394,
            91.7508910077454,
            92.1403092894271,
            45.1987029351812,
            27.4197265931333,
            12.261490191848,
            26.9470532043405,
            80.1381860313961,
            62.9500479611284,
            27.5265173563894,
            51.6907701569877,
            18.240662048408,
            57.8834697194193,
            80.9615249225139,
            93.5954445872334,
            53.8730718901171,
            40.2180719157665,
            32.0854871133979,
            8.37528887243739,
            57.6054482078205,
            23.3658462527292,
            21.650060716684,
            15.0286269167385,
            29.4194793917488,
            82.5662597804124,
            93.0431725710841,
            94.5096097294475,
            98.1048797348256,
            85.642396352385,
            21.1526742473603,
            47.5053807736113,
            3.09045369135564,
            38.089455900892,
            25.392030174683,
            52.0390024196838,
            61.2626258930545,
            21.5241694595678,
            5.20513798408651,
            5.2051379840865,
            3.00522645945153,
            28.7988861686488,
            50.6648922043036,
            75.117542171494,
            14.7605841523032,
            11.4229926718803,
            11.4229926718803,
            70.0719432251026
    };
}