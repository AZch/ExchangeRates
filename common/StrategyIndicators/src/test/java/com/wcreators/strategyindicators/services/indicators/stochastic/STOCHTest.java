package com.wcreators.strategyindicators.services.indicators.stochastic;

import com.wcreators.strategyindicators.services.indicators.ma.EMA;
import generators.PointsGenerator;
import org.junit.jupiter.api.Test;

import java.util.Arrays;
import java.util.List;
import java.util.stream.Collectors;
import java.util.stream.DoubleStream;

import static org.junit.jupiter.api.Assertions.assertTrue;

class STOCHTest {

//    private final Stoch stoch = new Stoch(new EMA(3));

    @Test
    public void loadData() {
//        double[] values = PointsGenerator.getValues();
//
//        for (int i = 0; i < values.length; i++) {
//            double[] lastN = i < 3
//                    ? Arrays.copyOfRange(values, 0, i + 1)
//                    : Arrays.copyOfRange(values, i - 2, i + 1);
//            List<Double> lastNObj = DoubleStream.of(lastN).boxed().collect(Collectors.toList());
//            StochResponse expected = stoch.addPoint(values[i], lastNObj);
//            double actualK = K[i];
//            double actualD = D[i];
//            String indexedErrorMessage = String.format("Incorrect calculated value for %d, %f : %f", i, expected.K, actualK);
//            assertTrue(Math.abs(expected.K - actualK) < 0.000001, indexedErrorMessage);
//            String indexedErrorMessageD = String.format("Incorrect calculated value for %d, %f : %f", i, expected.D, actualD);
//            assertTrue(Math.abs(expected.D - actualD) < 0.000001, indexedErrorMessageD);
//        }
    }

    double[] K = {
            0,
            0.0000000000,
            83.3333333333,
            100.0000000000,
            0.0000000000,
            0.0000000000,
            0.0000000000,
            0.0000000000,
            42.8571428571,
            100.0000000000,
            100.0000000000,
            0.0000000000,
            0.0000000000,
            0.0000000000,
            100.0000000000,
            92.3076923077,
            100,
            65,
            0,
            0,
            0,
            100,
            100,
            100,
            12.5,
            0,
            0,
            100,
            100,
            100,
            100,
            0,
            0,
            0,
            100,
            100,
            100,
            0,
            100,
            100,
            100,
            100,
            100,
            100,
            100,
            100,
            50,
            0,
            77.7777777777778,
            100,
            80,
            100,
            30,
            100,
            38.8888888888889,
            0,
            100,
            100,
            60,
            100,
            0,
            0,
            100,
            73.6842105263158,
            0,
            85.7142857142857,
            100,
            100,
            14.2857142857143,
            100,
            100,
            0,
            0,
            0,
            18.1818181818182,
            100,
            81.25,
            0,
            44.4444444444444,
            0,
            72.7272727272727,
            100,
            100,
            44.4444444444444,
            0,
            0,
            0,
            78.5714285714286,
            0,
            0,
            0,
            33.3333333333333,
            100,
            100,
            100,
            100,
            88.8888888888889,
            0,
            33.3333333333333,
            0,
            30.2325581395349,
            30.7692307692308,
            83.3333333333333,
            100,
            0,
            0,
            0,
            0,
            42.8571428571429,
            100,
            100,
            0,
            0,
            0,
            100,
    };

    double[] D = {
            0,
            0.0000000000,
            41.6666666667,
            70.8333333333,
            35.4166666667,
            17.7083333333,
            8.8541666667,
            4.4270833333,
            23.6421130952,
            61.8210565476,
            80.9105282738,
            40.4552641369,
            20.2276320685,
            10.1138160342,
            55.0569080171,
            73.6823001624,
            86.8411500812,
            75.9205750406,
            37.9602875203,
            18.9801437602,
            9.4900718801,
            54.7450359400,
            77.3725179700,
            88.6862589850,
            50.5931294925,
            25.2965647463,
            12.6482823731,
            56.3241411866,
            78.1620705933,
            89.0810352966,
            94.5405176483,
            47.2702588242,
            23.6351294121,
            11.8175647060,
            55.9087823530,
            77.9543911765,
            88.9771955883,
            44.4885977941,
            72.2442988971,
            86.1221494485,
            93.0610747243,
            96.5305373621,
            98.2652686811,
            99.1326343405,
            99.5663171703,
            99.7831585851,
            74.8915792926,
            37.4457896463,
            57.6117837120,
            78.8058918560,
            79.4029459280,
            89.7014729640,
            59.8507364820,
            79.9253682410,
            59.4071285649,
            29.7035642825,
            64.8517821412,
            82.4258910706,
            71.2129455353,
            85.6064727677,
            42.8032363838,
            21.4016181919,
            60.7008090960,
            67.1925098111,
            33.5962549056,
            59.6552703099,
            79.8276351550,
            89.9138175775,
            52.0997659316,
            76.0498829658,
            88.0249414829,
            44.0124707414,
            22.0062353707,
            11.0031176854,
            14.5924679336,
            57.2962339668,
            69.2731169834,
            34.6365584917,
            39.5405014681,
            19.7702507340,
            46.2487617307,
            73.1243808653,
            86.5621904327,
            65.5033174386,
            32.7516587193,
            16.3758293596,
            8.1879146798,
            43.3796716256,
            21.6898358128,
            10.8449179064,
            5.4224589532,
            19.3778961433,
            59.6889480716,
            79.8444740358,
            89.9222370179,
            94.9611185090,
            91.9250036989,
            45.9625018495,
            39.6479175914,
            19.8239587957,
            25.0282584676,
            27.8987446184,
            55.6160389759,
            77.8080194879,
            38.9040097440,
            19.4520048720,
            9.7260024360,
            4.8630012180,
            23.8600720376,
            61.9300360188,
            80.9650180094,
            40.4825090047,
            20.2412545023,
            10.1206272512,
            55.0603136256
    };


}